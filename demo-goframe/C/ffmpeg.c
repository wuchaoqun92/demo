#include <stdio.h>#include <errno.h>#include "ffmpeg.h"#include "libavformat/avformat.h"void test(int x){    int a = 0;    a = x*x;    printf("result:%d\n",a);}void test3(char* path){    AVFormatContext *ifmt = NULL;    //avformat_network_init;    ifmt = avformat_alloc_context();    char* url = path;//"/Users/wuchaoqun/Desktop/codeMaterial/output.avi";    int ret = -1;    ret = avformat_open_input(&ifmt,url,NULL,NULL);    if (ret < 0){        ret = -1;        goto end;    }    int tduration = ifmt->duration;    printf("视频时长为%d秒",tduration/1000000);    end:    avformat_close_input(&ifmt);    avformat_free_context(ifmt);    printf("ret=%d\n",ret);    getchar();}int test4(char* path){    AVFormatContext *pFormatCtx = NULL;    int times;    avformat_network_init();    if(avformat_open_input(&pFormatCtx,path,NULL,NULL) !=0 )    //if(avformat_open_input(&pFormatCtx, "http://vfx.mtime.cn/Video/2019/01/15/mp4/190115161611510728_480.mp4", NULL, NULL)!=0)    //if(avformat_open_input(&pFormatCtx, "/Users/wuchaoqun/Documents/Work/缺陷跟踪/1m.mp4", NULL, NULL)!=0)    {        fprintf(stderr,"err!");        exit(1);    }    times = pFormatCtx->duration/1000000;	//duration单位是us，转化为秒    //printf("time:%d\n",times);    avformat_close_input(&pFormatCtx);	//释放动作    errno = EINVAL;    return times;}